{% extends 'enigmas/base.html' %}

{% block title %}Regolamento e Punteggio{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-10">

            <h2 class="display-5 text-center mb-4">Regolamento del Gioco</h2>
            <p class="lead text-center mb-5">Benvenuto, detective. Il tuo obiettivo è analizzare il materiale fornito, collegare gli indizi e risolvere il caso nel tempo limite. Il tuo ingegno e la tua rapidità saranno messi alla prova.</p>

            <div class="card border-primary shadow-sm mb-5">
                <div class="card-header bg-primary text-white">
                    <h4 class="my-0">Come viene calcolato il Punteggio?</h4>
                </div>
                <div class="card-body p-4">
                    <p>Il punteggio finale per ogni enigma è la somma di diverse componenti. Per ottenere qualsiasi punto, però, è obbligatorio rispondere correttamente alla domanda chiave del caso.</p>
                    
                    <div class="alert alert-info" role="alert">
                        <h5 class="alert-heading">⚠️ Regola Fondamentale: La Domanda Principale</h5>
                        <p class="mb-0">Per ottenere un punteggio, è <strong>assolutamente necessario</strong> rispondere correttamente alla domanda principale del caso ("Chi è il colpevole?"). Se questa risposta è sbagliata, il tuo punteggio totale per l'enigma sarà <strong>zero</strong>.</p>
                    </div>

                    <ul class="list-group list-group-flush mt-4">
                        <li class="list-group-item px-0">
                            <h5>1. Punteggio Base <span class="badge bg-success float-end">+50 Punti</span></h5>
                            <p class="mb-1">Indovinando la risposta alla <strong>domanda principale</strong>, sblocchi un punteggio base di partenza.</p>
                        </li>
                        <li class="list-group-item px-0">
                            <h5>2. Punti Aggiuntivi <span class="badge bg-info float-end">+25 Punti cad.</span></h5>
                            <p class="mb-1">Ogni <strong>domanda secondaria</strong> a cui rispondi correttamente ti garantisce un bonus fisso.</p>
                        </li>
                        <li class="list-group-item px-0">
                            <h5>3. Bonus Tempo <span class="badge bg-warning float-end">Fino a +50 Punti</span></h5>
                            <p class="mb-1">La rapidità è premiata! Un bonus viene calcolato in base a quanto velocemente risolvi il caso, decrescendo linearmente fino alla scadenza.</p>
                            
                            <!-- SEZIONE AGGIUNTA -->
                            <div class="text-muted small mt-2">
                                <p class="mb-1">Il calcolo si basa sulla percentuale di tempo rimanente al momento della tua risposta corretta. La formula concettuale è:</p>
                                <pre class="bg-dark p-2 rounded mt-1 mb-0"><code class="text-warning">Bonus ≈ 50 Punti * (Tempo Rimanente / Tempo Totale)</code></pre>
                            </div>
                            <!-- FINE SEZIONE AGGIUNTA -->

                        </li>
                        <li class="list-group-item px-0">
                            <h5 class="text-danger">4. Malus Aiuti <span class="badge bg-danger float-end">-15 Punti cad.</span></h5>
                            <p class="mb-1">Sei in difficoltà? Puoi chiedere fino a <strong>3 aiuti</strong> per caso. Ogni aiuto richiesto comporterà una penalità fissa sul tuo punteggio finale. Usali con saggezza!</p>
                        </li>
                    </ul>

                    <div class="alert alert-secondary mt-4" role="alert">
                        <h5 class="alert-heading"><i class="bi bi-check2-square me-2"></i>Nota sulle Risposte Multiple</h5>
                        <p class="mb-0">Attenzione: alcune domande potrebbero richiedere di selezionare più opzioni corrette (ad esempio, più sospettati). Per considerare la risposta a quella domanda valida, è necessario selezionare <strong>tutte le opzioni corrette e nessuna di quelle errate</strong>. Selezionare un'opzione sbagliata o mancarne una corretta renderà la risposta a quella specifica domanda errata.</p>
                    </div>
                </div>
            </div>

            <div class="card border-danger shadow-sm">
                 <div class="card-header bg-danger text-white">
                    <h4 class="my-0"><i class="bi bi-exclamation-triangle-fill me-2"></i>Disclaimer Importante</h4>
                </div>
                <div class="card-body p-4">
                    <p class="fs-5 text-center">"È vietato l'utilizzo di qualsiasi forma di IA o strumento che ne sfrutta le potenzialità al fine della risoluzione dei casi!"</p>
                    <p class="text-center text-body-secondary">L'obiettivo del gioco è mettere alla prova l'ingegno umano. L'uso di strumenti di intelligenza artificiale per generare soluzioni è contrario allo spirito della competizione e comporterà sanzioni a discrezione dell'amministrazione.</p>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}
